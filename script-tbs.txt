#!/bin/bash

SID=$1
TBS=$2


if [ -z "$SID" ]
        then
        echo "Inserir SID do banco"
        exit 2
    
            elif [ -z "$TBS" ]
                    then
                            echo "Inserir o nome da tablespace"
                            exit 2
                else

                    USO=(`cat /tmp/TBS/tbluse_$SID.tmp | grep -w $TBS | awk '{print $2}'`)
                    TAM=(`cat /tmp/TBS/tbluse_$SID.tmp | grep -w $TBS | awk '{print $2}'`)

                    if [ "$USO" -ge 95 ]
                                    then
                                            echo  "CRITICAL: tbs $TBS $TAM % of use"
                        exit 2
                            elif [ "$USO" -ge 85 ]
                                    then
                                            echo  "WARNING: tbs $TBS $TAM % of use"
                             exit 1
							 else
                    echo  "OK : tbs $TBS $TAM % of use"
					fi
fi



#!/bin/ksh
x

SID=$1
TBS=$2


if [ -z "$SID" ]
        then
        echo "Inserir SID do banco"
        exit 2

            elif [ -z "$TBS" ]
                    then
                            echo "Inserir o nome da tablespace"
                            exit 2
                else

                    USO=`cat /tmp/TBS/tbluse_$SID.tmp | grep -w $TBS | awk '{print $2}'`
                    TAM=`cat /tmp/TBS/tbluse_$SID.tmp | grep -w $TBS | awk '{print $2}' `

                    if [ "$USO" -ge 95 ]
                                    then
                                            echo  "CRITICAL: tbs $TBS $TAM % of use"
                        exit 2
                            elif [ "$USO" -ge 85 ]
                                    then
                                            echo  "WARNING: tbs $TBS $TAM % of use"
                             exit 1
                                                         else
                    echo  "OK : tbs $TBS $TAM % of use"
                                        fi
fi
~
DOM_MRDSUN_SUNDBMP

define command {
       command_name                             check_tbs
       command_line                             $USER1$/check_nrpe -H $HOSTADDRESS$ -n -c check_tbs -a $ARG1$ $ARG2$
        }

command[check_tbs]=/usr/lib64/nagios/plugins/check_tbs.sh $ARG1$ $ARG2$
command[check_tbs]=/opt/iexpress/nagios/libexec/check_tbs.sh $ARG1$ $ARG2$
command[check_tbs]=/usr/local/nagios/libexec/check_tbs.sh $ARG1$ $ARG2$

define command {
       command_name                             check_nrpe1
       command_line                             $USER1$/check_nrpe -H $HOSTADDRESS$ -c check_qntprocess -a $ARG1$ $ARG2$
}




/usr/local/nagios/libexec/check_tbs.sh

check_qntprocess.sh

command[check_qntprocess]=/usr/lib64/nagios/plugins/check_qntprocess.sh $ARG1$ $ARG2$

#!/bin/bash

service=$1
numservices=$2
process=`ps -ef | grep -i $service |  grep -v $0 |  grep -v 'grep'| wc -l`

if [[ "$process" -lt "$numservices" ]];
        then
        echo -e "CRITICAL: $service is not running"
        exit 2
      else
        echo -e "OK: $service is running"
        exit 0
fi

